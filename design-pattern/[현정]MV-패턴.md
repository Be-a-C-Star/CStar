# MVC MVP MVVM 패턴

|특징|MVC|MVP|MVVM|
| -- | -- | -- | -- |
|관계| C : V = 1 : n | P : V = 1 : 1 | VM : V = 1 : n |
|뷰의 참조|X|O|O|

## MVC 패턴
MVC패턴은 모델(Model), 뷰(View), 컨트롤러(Controller)로 이루어진 디자인 패턴이다. 대표적인 프레임워크로 Spring WEB MVC가 있다.

- 모델
    - 애플리케이션의 데이터 (데이터베이스, 상수, 변수 등)
    - 컨트롤러를 통해 생성 또는 업데이트 된다.

- 뷰
    - 사용자 인터페이스 요소
    - 모델을 기반으로 사용자가 볼 수 있는 화면
    - 모델이 가지고 있는 정보를 따로 저장하지 않으며 변경이 발생하면 컨트롤러에게 전달한다.

- 컨트롤러
    - 하나 이상의 모델과 뷰를 잇는 다리 역할
    - 이벤트 등 메인 로직을 담당한다.
    - 모델과 뷰의 생명주기를 관리하며 변경 통지를 받으면 이를 해석하여 각각의 구성 요소에게 해당 내용을 알린다.

### 장점
- 애플리케이션의 구성 요소를 세 가지 역할로 구분하여 개발 시 각각의 구성 요소에만 집중해서 개발할 수 있다.
- 재사용성과 확장성이 용이하다.

### 단점
- 애플리케이션이 복잡해질수록 뷰와 모델의 관계가 복잡해질 수 있다.

## MVP (Model-View-Presenter)
컨트롤러 대신 프레젠터(Presenter)로 교체된 패턴. V와 P는 1:1 관계여서 MVC보다 더 강한 결합을 지닌 디자인 패턴이다. 
- Presenter는 View와 Model 사이에서 상호작용을 관리
- 초기 안드로이드 앱에서 주로 사용.
- `Activity`나 `Fragment`가 View 역할을 하고, Presenter가 비즈니스 로직을 관리.

## MVVM 패턴
컨트롤러 대신 뷰모델(View Model)로 바뀐 패턴. VM은 뷰를 추상화한 계층으로 뷰와 1:N 관계를 갖는다. VM은 커맨드와 데이터바인딩을 가진다.

- 커맨드 : 여러 요소에 대한 처리를 하나의 액션으로 처리하는 기법
- 데이터바인딩 : 화면에 보이는 데이터와 브라우저 상의 메모리 데이터를 일치시키는 방법
MVVM 패턴을 가진 대표적인 프레임워크는 Vue.js가 있다.

## Spring의 MVC패턴 적용사례

### 디스패처 서블릿

Spring Web MVC의 MVC패턴은 아래 디스패처 서블릿의 사용자 요청처리과정을 통해 알 수 있다.

1. 클라이언트 요청 시 `DispatcherServlet`이 가장 먼저 받는다. 요청 당시 받은 url, form data 등 여러 데이터들을 기반으로 해당 요청을 처리할 컨트롤러를 결정한다.
```java
@RequestMapping(value = "/ex/foos", method = POST) 
@ResponseBody
public String postFoos() {
    return "Post some Foos"; 
}
```
2. 하나 이상의 handler mapping을 참고하여 컨트롤러 설정 및 요청 전달
3. 컨트롤러는 받은 요청을 토대로 비즈니스 로직을 수행
4. 사용자에게 전달 될 모델을 생성
5. 뷰를 구현하기 위한 view resolver 참고
6. 해당 정보를 기반으로 뷰를 렌더링
7. 응답 데이터 전송
