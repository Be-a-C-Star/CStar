### 트랜잭션#1. **트랜잭션, 커밋, 롤백, 트랜잭션 전파**

#### 트랜잭션:

> “작업 묶음”. 편의점에서 결제하기 전까지 물건 담기, 계산, 영수증 받기까지 한 세트.

- **예:** “물, 라면, 초콜릿 사기”가 트랜잭션

#### 커밋 (commit):

> “이제 진짜로 계산 완료!”

- 예: 편의점 계산대를 지나면서 “결제 완료” 버튼 누름. → 이제 취소 안 됨.

#### 롤백 (rollback):

> “아, 물건 다시 제자리 놓고 안 살래.”

- 예: 실수했을 때, 계산 취소하고 모든 물건 원래대로 돌려놓음.

#### 트랜잭션 전파:

> “내 트랜잭션 안에 다른 사람이 트랜잭션도 같이 묶여서 처리돼야 할 때”

- 예: 네가 편의점에서 친구한테 “너도 초콜릿 하나 사”라고 해서 같이 결제했는데, 네 결제가 실패하면 친구 것도 자동 취소됨.

---

### 트랜잭션#2. **ACID**

> 트랜잭션이 꼭 지켜야 하는 4가지 원칙.

| 이름                     | 뜻                             | 편의점 비유                                          |
| ------------------------ | ------------------------------ | ---------------------------------------------------- |
| **A**tomicity (원자성)   | 모두 하거나 아무것도 안 하거나 | 결제할 때 물+라면+초콜릿 전부 결제되거나, 전부 안 됨 |
| **C**onsistency (일관성) | 결제 시스템 규칙 지켜짐        | 초콜릿 재고 1개 남았으면, 결제 후 0개가 되어야 함    |
| **I**solation (격리성)   | 다른 사람 계산에 영향 안 받음  | 너 계산하는 동안 다른 사람 결제랑 섞이지 않음        |
| **D**urability (지속성)  | 결제 후 기록은 사라지지 않음   | 정전돼도 영수증 기록 남아있음                        |

---

### 트랜잭션#3. **격리성 (Isolation)**

> 여러 사람이 동시에 결제할 때, 서로 영향 안 주도록 막는 성질.

- 예: 너랑 친구가 같은 초콜릿 1개를 동시에 사려 해도, 한 명만 결제 성공해야 함.
- 서로 격리 안 되면 **하나 가지고 둘 다 결제된 것처럼 보이는** 문제가 생겨!

---

### 트랜잭션#4. **격리성 부족으로 생기는 문제들**

| 현상                                         | 설명                            | 예시                                                                           |
| -------------------------------------------- | ------------------------------- | ------------------------------------------------------------------------------ |
| **더티 리드 (Dirty Read)**                   | 아직 결제 안 된 임시정보를 읽음 | 친구가 초콜릿 고르고 결제 안 했는데, 너가 이미 팔렸다고 생각함                 |
| **반복 불가능한 읽기 (Non-Repeatable Read)** | 다시 읽었더니 내용이 바뀜       | 초콜릿 가격이 처음 봤을 땐 1,000원이었는데, 결제 직전에 1,200원으로 바뀜       |
| **팬텀 리드 (Phantom Read)**                 | 조건에 맞는 데이터가 새로 생김  | “가격 1,000원 이하 상품 목록” 봤는데, 누가 갑자기 새 물건 등록해서 리스트 바뀜 |

---

### 트랜잭션#5. **격리수준 종류**

> 격리성 강한 순서대로 (강할수록 안전하지만 느림)

| 수준                 | 허용되는 현상        | 설명                                                    |
| -------------------- | -------------------- | ------------------------------------------------------- |
| **READ UNCOMMITTED** | 더티 리드 허용       | 남이 아직 결제 안 한 물건도 본다                        |
| **READ COMMITTED**   | 커밋된 것만 본다     | 결제된 데이터만 읽음 (더티 리드 ❌)                     |
| **REPEATABLE READ**  | 반복해서 읽어도 같음 | 같은 물건 가격은 계속 같다 (팬텀 리드 가능)             |
| **SERIALIZABLE**     | 완전 격리            | 모든 결제가 순서대로 처리됨 (가장 안전하지만 가장 느림) |
