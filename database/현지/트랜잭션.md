# 트랜잭션
## 트랜잭션, 커밋, 롤백, 트랜잭션 전파
- 트랜잭션: 데이터베이스에서 하나의 논리적 기능을 수행하기 위한 작업의 단위 (쿼리를 묶는 단위)
- 커밋: 여러 쿼리가 성공적으로 처리되었다고 확정하는 명령어, 트랜잭션 단위로 수행되며 변경된 내용이 모두 영구적으로 저장
- 롤백: 트랜잭션으로 처리한 하나의 묶음 과정을 일어나기 전으로 돌리는 일(취소)
- 트랜잭션 전파: 여러 계층/메서드가 트랜잭션을 어떻게 공유하고 전달받을지 결정하는 정책. 이를 통해 복잡한 비즈니스 로직에서도 데이터 일관성과 무결성을 유지할 수 있음.

## ACID
데이터베이스 트랜잭션이 반드시 지켜야 하는 4가지 핵심 속성을 의미

- Atomicity (원자성): 트랜잭션 내의 모든 작업이 전부 성공하거나, 전부 실패해야 함을 의미한다.
- Consistency (일관성): 트랜잭션이 성공적으로 완료되면, 데이터베이스는 항상 일관성 있는 상태를 유지해야 한다. 
- Isolation (격리성): 동시에 여러 트랜잭션이 실행될 때, 각 트랜잭션은 서로의 작업에 영향을 받지 않아야 한다. 
- Durability (지속성): 트랜잭션이 성공적으로 커밋되면, 그 결과는 영구적으로 데이터베이스에 저장되어야 한다. 

## 트랜잭션 격리성(Transaction Isolation)
데이터베이스에서 여러 트랜잭션이 동시에 실행될 때, 각 트랜잭션이 다른 트랜잭션의 중간 결과에 영향을 받지 않고 독립적으로 수행될 수 있도록 보장하는 성질. 

격리성이 중요한 이유는, 여러 사용자가 동시에 데이터베이스를 사용할 때 트랜잭션 간의 간섭이나 충돌로 인해 데이터 일관성이 깨질 수 있기 때문이다. 

## 격리수준에 따른 현상
- 팬텀리드(phantom reads): 	같은 조건으로 두 번 조회 시 행 변화. 중간에 행이 추가/삭제됨.

- 반복 가능하지 않은 조회(Nonrepeatable Reads): 같은 행을 두 번 읽을 때 값이 다름. 중간에 값이 수정됨. 

- 더티 리드(Dirty Reads): 커밋 전 데이터 읽기. 롤백될 데이터 읽음. 

## 격리성 수준
1. Read Uncommitted (커밋되지 않은 읽기)
- 다른 트랜잭션이 아직 커밋하지 않은 데이터를 읽을 수 있음(Dirty Read 허용)
- 가장 낮은 격리 수준, 데이터 불일치 가능성 높음

2. Read Committed (커밋된 읽기)
- 다른 트랜잭션이 커밋한 데이터만 읽을 수 있음
- Dirty Read는 방지되지만, Non-repeatable Read(반복 불가능 읽기)는 발생할 수 있음

3. Repeatable Read (반복 가능 읽기)
- 트랜잭션이 시작된 이후 읽은 데이터는 트랜잭션이 끝날 때까지 항상 동일하게 보장
- Non-repeatable Read 방지, 하지만 Phantom Read(팬텀 읽기)는 발생할 수 있음

4. Serializable (직렬화 가능)
- 가장 높은 격리 수준, 모든 트랜잭션이 순차적으로 실행된 것처럼 보장
- 팬텀 읽기까지 완벽히 방지, 성능 저하가 큼