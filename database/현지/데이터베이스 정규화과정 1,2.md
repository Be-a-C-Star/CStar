# 개념과 이상현상

## 정규화 과정
정규화(Normalization)는 데이터를 중복 없이 효율적으로 저장하기 위해 테이블 구조를 나누는 작업이다. 
정규화 작업의 목표는 
-	중복 제거
-	이상현상 방지
-	데이터 무결성 유지

정규화는 여러 단계가 있는데, 아래와 같다. 
|단계|의미|
|--|--|
|1NF (제1정규형)|컬럼이 원자값(더 이상 나눌 수 없는 값)으로 구성되어야 함
|2NF (제2정규형)|부분 함수 종속 제거 (기본키의 일부분에만 종속된 속성 제거)|
|3NF (제3정규형)|이행적 함수 종속 제거 (기본키가 아닌 속성에 종속된 속성 제거)

## 이상현상
정규화를 하지 않으면 데이터 삽입/수정/삭제시 이상한 문제가 생기는데, 이를 이상현상이라고 한다. 

### 이상현상 - 삽입 이상 (Insertion Anomaly)
데이터를 넣고 싶지만 불필요한 다른 정보까지 같이 넣어야 하는 문제

### 이상현상 -  갱신 이상 (Update Anomaly)
데이터 중복 때문에 일부만 수정하면 데이터 불일치가 발생하는 문제

### 이상현상 - 삭제 이상 (Deletion Anomaly)
어떤 데이터를 삭제했는데 원래 지우면 안 되는 정보까지 함께 사라지는 문제

---

# 함수적 종속성
어떤 속성 A의 값이 정해지면, 속성 B의 값이 항상 하나로 정해지는 관계

## 함수적 종속성 예시

## 완전함수종속과 부분함수종속
1. ✅ 완전 함수 종속 (Full Functional Dependency)
- 정의 : 기본키 전체에 종속된 경우, 기본키의 모든 속성을 알아야 종속 속성이 결정됨

```
기본키: (학번, 과목)
속성: 성적

(학번, 과목) → 성적 ✅
```

2. ⚠️ 부분 함수 종속 (Partial Functional Dependency)
- 정의 : 기본키의 일부 속성만으로 종속 속성이 결정되는 경우, 부분적으로만 종속됨 → 정규화 대상
```
기본키: (학번, 과목)
속성: 이름

학번 → 이름 ❌ 부분 함수 종속
```

## ✨ 정규화의 이점과 정규화를 하지 않으면 발생하는 문제
정규화를 하게 되면, 중복 제거, 이상현상 방지, 데이터 무결성 유지가 가능하다. 
만약 정규화를 하지 않으면 데이터 삽입, 수정, 삭제시 이상현상이 생긴다. 

## ✨ 정규화의 단점은 무엇이고 비정규화가 필요한 상황은 언제일까요?
정규화의 단점은 복잡한 조인, SQL 작성이 어려움, 삽입/수정시 불편함, 실시간 성능 이슈가 있다. 
비정규화는 정규화된 테이블을 일부러 다시 합치거나 중복을 허용하는 설계 방식이며, 성능을 위해 중복을 감수하고 구조를 단순화하는 작업이다. 조회 성능이 중요해서 자주 조회되는 데이터를 한 테이블로 합쳐서 속도 개선하거나, 읽기 위주의 시스템에서는 중복보다 빠른 조회가 더 중요하다. 캐시/검색 최적화 용도로도 비정규화를 사용한다. 

## ✨ clustered index와 non-clustered index의 차이는 무엇인가요
Clustered Index는 실제 데이터가 인덱스 기준으로 정렬되며, 테이블 당 index 한 개만 가능하다. 인덱스를 통해 바로 데이터에 접근 가능하며, 인덱스의 값은 데이터 값이라고 할 수 있다. 
Non-clustered Index는 인덱스와 실제 데이터가 따로 존재한다. 테이블 당 index를 여러 개 만들 수 있으며, index를 통해 위치를 파악한 후 추가 접근이 필요하다. index는 pointer의 역할을 한다. 

## ✨ 이상현상에 대해서 설명해주세요
이상현상은 삽입이상, 갱신이상, 삭제이상으로 분류할 수 있으며
삽입이상은 데이터를 넣고 싶지만 불필요한 다른 정보까지 같이 넣어야 하는 문제이고,
갱신이상은 데이터 중복 때문에 일부만 수정하면 데이터 불일치가 발생하는 문제이며, 
삭제이상은 어떤 데이터를 삭제했는데 원래 지우면 안 되는 정보까지 함께 사라지는 문제이다. 

## ✨ 완전함수종속과 부분함수종속의 각 예시를 설명해주세요
완전 함수 종속은 기본키 전체에 종속된 경우, 기본키의 모든 속성을 알아야 종속 속성이 결정되며
학번만 알아서는 성적을 알 수 없고, 학번과 과목을 알아야 성적을 알 수 있기 때문에 기본키 전체에 종속된다고 할 수 있다. 

부분 함수 종속은 기본키의 일부 속성만으로 종속 속성이 결정되는 경우, 부분적으로만 종속되는 것으로 정규화 대상으로 본다. 예를 들어 기본키가 학번과 과목일 때, 학번만 알아도 이름을 알 수 있기 때문에 정규화 대상이다. 