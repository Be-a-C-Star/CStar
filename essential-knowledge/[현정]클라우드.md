## 가상머신

전통적인 배포 방식은 물리적인 컴퓨터 한 대에 하나의 OS를 깔고 여러 프로그램을 설치하는 방식이다. 계정을 나눠 각기 다른 사용자가 이용할 수 있지만 어떤 프로그램을 설치했을 때 다른 앱에 영향을 미치게 된다. 서로 다른 계정을 사용하더라도 같은 OS 위에 설치되기 때문에 A 계정에서 설치한 프로그램이 B 계정에 있던 프로그램을 간섭할 수 있게 된다. 이를 방지하기 위해 가상머신을 기반으로 배포할 수 있는 기술이 나타났다.

### 가상화 배포 방식

가상머신이란 컴퓨터의 하드웨어를 소프트웨어적으로 구현한 것을 말하며 계정을 나누지 않고 한 대의 컴퓨터에 여러 개의 OS를 구동할 수 있게 한 것이다. 이는 하드웨어를 물리적으로 갈아끼우지 않고 설정만으로도 수행할 수 있게 되었다. 일반적인 컴퓨터는 하드웨어 다음으로 OS가 설치되지만 가상머신은 하드웨어 다음에 하이퍼바이저라는 계층을 따로 둔다. 하이퍼바이저는 하나의 시스템 상에서 가상 컴퓨터를 여러 개 구동할 수 있도록 해주는 중간 계층을 의미한다. 그 위에 필요한 만큼 가상머신을 두어 여러 개의 OS를 설치할 수 있게 한다. 이렇게 되면 계정을 따로 두지 않아도 여러 명의 사용자가 각기 다른 OS 위에서 컴퓨터를 사용할 수 있고 또한 각 가상머신마다 서로 다른 메모리량을 제공받을 수도 있다.
클라우드는 위와 같은 가상화 기술 덕분에 한 대의 하드웨어로 여러 명의 사용자들에게 독립적인 클라우드 서비스를 제공할 수 있다.

## 오프프레미스(off-premise)와 온프레미스(on-premise)

- off-premise

  - 일반적인 클라우드 서비스를 의미할 수 있으며 자사의 IDC가 없는 경우를 말한다. 이는 다른 회사의 공급자가 호스팅을 하고 인터넷을 통해 사용자에게 인프라, 플랫폼, 소프트웨어를 제공한다. 이를 이용하면 자체 인프라나 하드웨어 설치 없이도 애플리케이션과 리소스를 쉽고 싸게 이용이 가능하며 서버를 직접 구매할 때 고려해야 할 전력, 위치, 서버 세팅, 확장성을 고민하지 않고 서비스 운영에만 집중할 수 있다.

- on-premise
  - 오프프레미스와는 다르게 기업이나 개인이 자체 시설에서 보유하고 직접 유지 관리하는 프라이빗 데이터 센터(IDC)를 의미하며, 네트워크 선을 까는 것부터 시작해 서버, 데이터베이스 설치 등을 모두 손수 진행하는 것을 의미한다. 한국에서는 네이버가 온프레미스 방식을 사용하며 춘천에 위치하는 것으로 알려져있다.

## IaaS, PaaS, SaaS

- IaaS(Infrastructure-as-a-Service)

  - 인프라형 클라우드 서비스로 클라우드는 인프라만 제공하는 환경이다. 개발자는 JVM, MongoDB 등 필요한 프로그램을 직접 설치해야 하는 대신 특정 서비스에 종속되지 않는다는 특징이 있다. 집으로 치면 옵션이 하나도 없는 빈 방을 생각하면 된다.
  - PaaS와 다르게 유연성과 이식성이 높아 서버를 이전하게 되더라도 쉽게 이전이 가능하다.
  - AWS의 EC2나 NCP

- PaaS(Platform-as-a-Service)

  - 플랫폼형 클라우드 서비스로 클라우드가 플랫폼을 제공하는 환경이다. IaaS와는 다르게 필요한 프로그램들이 설치되어 있으며 클릭을 통해 해당 서비스를 쉽게 이용할 수 있다. PaaS는 모니터링과 CI/CD가 함께 제공된다. 이는 빌트인 에어컨이나 냉장고 등 옵션이 들어간 방을 생각하면 된다.
  - 프로그램들이 플랫폼의 컴포넌트들에 설치되어 있어서 플랫폼에 종속되어 있다. 따라서 IaaS보다 유연성과 이식성이 낮다. 반면에 직접 로깅과 CI/CD를 구현해야하는 Iaas와는 달리 그에 필요한 환경이 제공되기 때문에 운영비 효율 측면에서는 IaaS보다 높다.
  - heroku

|            | IaaS | PaaS |
| ---------- | ---- | ---- |
| 이식성     | 높음 | 낮음 |
| 유연성     | 높음 | 낮음 |
| 운영비효율 | 낮음 | 높음 |

- SaaS(Software-as-a-Service)

  - 서비스형 클라우드 서비스로 만들어져 있는 완전한 서비스를 클라우드 서비스로부터 제공받아 사용할 수 있다. 인터넷으로 연결되어 있기 때문에 서로 다른 환경과 컴퓨터에서 동시에 변경과 공유가 가능하다.
  - 구글 DOCS

## 컨테이너와 도커

### 컨테이너

애플리케이션이 하나의 컴퓨팅 환경에서 다른 컴퓨팅 환경으로 빠르고 안정적이게 실행되도록 코드와 모든 종속성을 패키징하는 소프트웨어 표준 단위이다. 컨테이너는 OS를 공유하기 때문에 빠르고 경량화되어 있으며 격리성도 뛰어나다. 하지만 OS에 문제가 생기면 다른 앱에도 영향을 미칠 수 있다는 단점이 있다.

### 도커

IaaS와 PaaS의 장점인 이식성, 유연성, 운영비효율을 모두 챙긴 플랫폼으로 컨테이너에 필요한 기능을 모두 제공한다. 애플리케이션 구동에 필요한 환경설정관련 절차를 도커파일에 작성하고 그 후 빌드를 하면 도커이미지가 생성이 되고, 도커이미지를 실행시키면 도커컨테이너가 만들어진다. 그 후 도커컨테이너에 설정된 프로그램, 데이터 등이 실제 컴퓨팅자원 위에서 돌아가게 된다.

#### 도커의 과정

- 도커 파일
  - 패키지, 환경 변수 설정 등을 기록한 파일
  - 빌드하여 도커 이미지로 변환한다.
- 도커 이미지
  - 컨테이너 실행에 필요한 파일과 설정값, 데이터 등이 포함된 상태값으로 불변성을 가지고 있다.
  - 하나의 이미지에서 여러 개의 컨테이너를 생성할 수 있으며 컨테이너의 상태와는 무관하게 이미지는 그대로 존재한다.
- 도커 컨테이너
  - 컨테이너가 실행되면 도커 이미지에 설정된 프로그램, 데이터 등이 실제 컴퓨터 자원과 연결된다.
