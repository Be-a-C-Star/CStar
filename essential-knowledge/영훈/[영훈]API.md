# API(Application Programming Interface)

##### 둘 이상의 컴퓨터 프로그램이 서로 통신하는 방법이자 컴퓨터 사이에 있는 중계 계층을 의미함.

##### Ex)

프로토콜, 메서드, 데이터타입 등이 정의된 중계계층

1. 프로토콜 - 어떤 프로토콜로 통신할건지 `HTTP` or `HTTPS`
2. 메서드 - 어떤 HTTP 메서드를 사용하는지 `GET` or `POST`
3. 데이터타입 `JSON` or `XML`

> 💡 API라는 용어는 과거로부터 발전되어 여러 의미로 쓰임

**Ex)**

- 라이브러리 및 프레임워크를 설명하는 명세서
- 웹에서는 WEB API, WEB Socket API 등
- 현재 시점을 기준으로 보통 WEB API를 가리킴.

#### Interface

- 서로 다른 두 개의 시스템, 장치 사이에서 정보나 신호를 주고받는 경우의 접점이나 경계면
  - Ex)
    사용자는 갤럭시 휴대폰의 내부 구조가 어떻게 돼있는지는 모르지만 블루투스 버튼을 누르면 블루투스 기능을 이용할 수 있음

---

#### API의 장점

1. 제공자는 데이터를 한곳에 모을 수 있음

- Ex) 검색 클릭시 일어난 이벤트, 베스트셀러 페이지에서 사용자가 클릭한 이벤트를 모아서 DB에 넣어야 하는 상황 -> 하나의 API를 통해 데이터 수집 가능

2. 제공자는 서비스의 중요한 부분을 드러내지 않아도 됨(필요한 부분만 API에 노출 가능)
3. 앱 개발 프로세스를 단순화 시키고 시간과 비용을 절약함

- Ex) 네이버에서 제공하는 Open API 네이버 아이디로 로그인(네아로)를 통해 네이버 소셜 로그인 구현 프로세스를 단순화 시킬 수 있음

4. 내부 프로세스가 수정되었을 때 API를 매번 수정하지 않아도 됨

- Ex)
  - 쇼핑몰을 운영중인 상황
  - 주문 내역을 조회할 수 있는 기능이 있음
  - 초기 상태는 API 엔드포인트가 `/api/orders`임
  - 회사가 성장하면서 주문량이 급증하여 DB 성능 개선이 필요
  - 개발팀은 주문 데이터를 여러 테이블로 분산하고 캐싱 계층을 추가함
  - 전통적인 방식: API도 함께 수정하고 클라이언트 앱도 새 API를 사용하도록 업데이트
    - ex ) `/api/v2/orders`
  - API의 장점을 활용한 방식: 기존 엔드포인트는 유지, 내부적으로 데이터를 가져오는 로직만 수정
  - 결론: 사용자는 앱 업데이트를 하지 않고 기존 주문 내역 조회 기능 이용
    - 주문 조회 기능 내부 구성(DB 성능 향상됨, 데이터를 여러 테이블로 분산 등,,)이 어떻게 바뀌었는지 알 필요 없음

5. 사용자는 해당 서비스가 어떻게 구현되는지 알 필요없이 필요한 정보만을 받음

- Ex) 내가 '신의 탑'이라는 네이버 웹툰을 본다고 했을 때, 필요한 건 그냥 클릭해서 들어갈 수 있는 UI화면만 있으면 됨. 내부 구성이 어떻게 돼있는지는 알 필요가 없음

---

#### API의 종류

**1. Private API**

- 내부적으로 사용되는 API. 주로 해시키를 하드코딩해놓고 서버간에 통신함.
  - Ex) 주로 `SHA256` 해시 알고리즘 사용
  - 서버간에 HTTP를 사용한다면 생성한 해시키를 HTTP 헤더에 담아서 보내고 받는 입장에서 올바른 해시키인지 확인함
    ![해시키](<스크린샷 2024-09-30 오후 11.59.06.png>)
- 비즈니스 파트너와 비밀스럽게 해시키를 공유해 통신
- 제 3자에게 노출하지 않음

**2. Public API**

- 모든 사람이 사용할 수 있는 개방형 API.
- 많은 트래픽을 방지하기 위해 하루 요청수 제한 있음
- Public API 중에서도 접속하는 대상에 대한 제약이 없는 경우를 OpenAPI라 함

  - ex) Google Cloud API, Kakao Developers

  ![네이버 일 요청 허용량](<스크린샷 2024-09-30 오후 11.46.33.png>)

- 하루에 사용자가 천만 번 요청을 한다고 하면 서버 유지 비용이 엄청나게 많이 들기때문에 요청수 제한이 필요함.
