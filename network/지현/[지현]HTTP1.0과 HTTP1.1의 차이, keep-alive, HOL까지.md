# DEEP DIVE : HTTP/1.0과 HTTP/1.1의 차이, keep-alive, HOL까지

## HTTP/1.0

각 요청당 TCP 핸드셰이크가 발생되며 기본적으로 한 연결당 하나의 요청을 처리하도록 설계됨.
한 번 연결할 때마다 TCP 연결을 계속해야 하니 RTT가 늘어가는 문제점 발생.
이를 해결하기 위해 HTTP/1.1 나옴.

> #### RTT란?
>
> 신호를 전송하고 해당 신호의 수신확인에 걸린 시간을 더한 값이자, 어떤 메시지가 두 장치 사이를 왕복하는 데 걸린 시간.

## HTTP/1.1

HTTP/1.0의 단점을 보완한 프로토콜으로 3가지 차이점이 있음.

### 1. keep-alive default

매번 데이터를 요청할 때마다 TCP 연결을 하는게 아닌 한번 해놓고 계속해서 데이터를 받을 수 있음.

### 2. 호스트 헤더

항상 호스트를 포함해서 요청하도록 변경.

### 3. 대역폭 최적화

`Range:bytes=5000-` 라는 헤더를 추가해서 다운로드 재개 요청을 할 수 있도록 바뀜.

## 요청을 줄이기 위한 기술

RTT 요청을 줄이기 위해 여러 기술 도입.

### 1. 이미지 스프라이트

수많은 이미지를 하나의 이미지로 만들어 하나의 이미지만 다운받아놓고 이를 통해 수많은 이미지를 다운받는 듯한 효과.

### 2. 코드압축

코드를 압축해서 서빙.

### 3. 이미지 Base64 인코딩

이미지 파일을 64진법으로 이루어진 문자열로 인코딩해서 이미지 서버에 대한 HTTP 요청을 할 필요가 없이 만드는 것.
그러나 파일크기가 37% 커짐.

## HTTP/1.1의 고질적인 문제 : HOL

그러나, HOL과 무거운 헤더(Header)를 가지는 문제를 해결하지 못함.

> #### HOL(Head Of Line Blocking)
>
> 네트워크에서 같은 큐에 있는 패킷이 그 첫번째 패킷에 의해 지연될 때 발생하는 성능 저하 현상
