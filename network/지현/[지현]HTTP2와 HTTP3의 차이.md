# DEEP DIVE : HTTP/2와 HTTP/3의 차이

## HTTP/2

HTTP/1.1의 한계를 극복하기 위해 SPDY 프로토콜을 기반으로 함.

### 1. 바이너리 포맷 계층

애플리케이션 계층과 전송 계층 사이에 바이너리 포맷 계층을 추가.
0과 1로 이루어진 바이너리 데이터로 변경.
더 작은 메시지가 프레임으로 캡슐화 되어서 전송.

### 2. 멀티플렉싱

단일 TCP연결의 여러 스트림에서 여러 HTTP 요청과 응답을 비동기적으로 보냄. => HOL 해결
리소스를 작은 프레임으로 나누고 이를 스트림으로 프레임을 전달.
각각의 프레임은 스트림ID, 해당 청크의 크기를 나타내는 프레임이 추가되었기 때문에 작게 나눠서 다운로드가 되더라도 결과적으로 응답데이터에서는 올바른 순서로 재조립.

### 3. 서버푸시

서버가 리소스를 클라이언트에 푸시.
요청된 html파일과 함께 다른 개체를 별도로 보낼 수 있음.
요청한 html에 css가 포함되어있다면 별도 요청없이 css를 같이 보낼 수 있음.

### 4. 헤더압축

헤더를 허프만 인코딩 압축 방법 등으로 압축.

> #### 허프만 인코딩이란?
>
> 문자열을 문자 단위로 쪼개 빈도수를 세어 빈도가 높은 정보는 적은 비트수를 사용해 표현.
> 빈도가 낮은 정보는 비트 수를 많이 사용하여 전체 데이터 표현에 필요한 비트양을 줄이는 알고리즘.

### 5. 우선순위

서버에서 원하는 순서대로 우선순위를 정해 리소스를 전달

## HTTP/3

HTTP/2는 여전히 TCP를 사용하기 때문에 초기 연결에 대한 RTT로 인한 지연시간이라는 문제점이 있음.
이를 해결한 버전이 HTTP/3.

QUIC(Quick UDP Internet Connections)이라는 계층 위에서 돌아감.
UDP 기반으로 돌아 가며 멀티플렉싱, 초기 연결 설정 시 지연시간 감소라는 특성 가짐.
QUIC은 1 - RTT만 필요하다는 장점 가짐.
TLS로 암호화통신을 구축할 때의 단 한번의 핸드셰이크를 활용해 클라이언트와 서버간의 연결, 암호화 통신 모두 다 구축.

=> 1 - RTT만에 모든 연결을 성립
