### TCP/IP 4계층

#### 인터넷 계층(network)

###### 한 노드에서 다른 노드로 전송 계층에서 받은 세그먼트 또는 데이터그램을 패킷화 하여 전송하는 계층

- IP, ICMP, ARP가 대표적임

#### 인터넷 계층의 주요 기능

##### 1. IP 주소 체계

- 인터넷 계층은 각 호스트(네트워크 인터페이스)에 고유 IP 주소(IPv4 혹은 IPv6)를 부여하여, 전 세계 모든 기기를 구분할 수 있도록 함
- IPv4는 32비트 주소, IPv6는 128비트 주소를 사용

##### 2. 라우팅(Routing)

- IP 패킷에 담긴 목적지 IP 주소를 보고, 패킷이 어느 경로(라우터, 게이트웨이 등)를 거쳐야 하는지 결정함
- 네트워크끼리 연결하고 데이터를 전송하는 기기를 `라우터`라고 하며, 라우터에 의한 네트워크 간의 전송이 `라우팅`임
- 라우터가 내부의 라우팅 테이블(Routing Table)을 통해 경로 정보를 등록하여 데이터 전송을 위한 최적의 경로를 찾는데, 이렇게 출발지와 목적지 간의 데이터 전송 과정을 가리켜 End-to-End 통신이라고 부름

##### 3. 비연결형, 비신뢰성

- IP는 연결을 맺지 않고(Connectionless), 패킷을 “최선 노력(best effort)” 방식으로 전달함
- 패킷 손실, 순서 뒤바뀜, 중간 파손 등에 대한 책임이 없고, 재전송이나 흐름 제어는 전송 계층(TCP 등)에서 담당함

##### 4. 프래그멘테이션(Fragmentation)

- 경로 중 어떤 네트워크 구간의 MTU(Maximum Transmission Unit)가 작으면, IP 계층에서 패킷을 여러 조각으로 나누어 전송함
- 최종 목적지에서 조각들을 재조립하여 원래 데이터로 복원함

##### ICMP(Internet Control Message Protocol)

###### 노드와 노드 사이에서 통신이 잘되나를 확인할 때 쓰는 프로토콜

![alt text](<스크린샷 2024-12-29 오후 3.19.57.png>)

- 데이터를 교환하는데 사용되지 않는 프로토콜임
- 일반적으로 이 프로토콜은 테스팅에 사용함
- IP와는 달리 TCP 또는 UDP 와 같은 전송 계층 프로토콜과 연관되지 않고 독립적인 비연결형 프로토콜임
- 이것은 ICMP를 비연결형 프로토콜을 기반으로 구축됨

![alt text](<스크린샷 2024-12-29 오후 3.22.24.png>)

`ping www.google.com`

- ping을 통해서 연결을 확인할때 ICMP 프로토콜을 기반으로 테스팅을 하는 것임
