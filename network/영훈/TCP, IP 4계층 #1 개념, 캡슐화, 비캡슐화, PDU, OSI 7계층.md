#### TCP/IP 4계층

###### 장치들이 인터넷 상에서 데이터를 주고받을 때 쓰는 독립적인 프로토콜의 집합

- TCP(Transmission Control Protocol) / IP(Internet Protocol)
- 인터넷을 통해 데이터를 보낼 때 주로 TCP와 IP를 이용해서 보내기 때문에 이런 용어를 가짐
  ![alt text](<스크린샷 2024-12-23 오후 5.21.59.png>)
- 각 계층은 서로 독립적임
- 네트워크 접속계층은 링크계층이라고도 불림

##### 애플리케이션 계층(application)

- 응용계층이라고 함
- HTTP, SMTP, SSH, FTP가 대표적임
- 웹 서비스, 이메일 등 서비스를 실질적으로 사람들에게 제공하는 층

##### 전송 계층(transport)

- TCP, UDP가 대표적임
- 애플리케이션 계층에서 받은 메시지를 기반으로 세그먼트 또는 데이터그램으로 데이터를 쪼개고 데이터가 오류없이 순서대로 전달되도록 도움을 주는 층

##### 인터넷 계층(network)

- IP, ICMP, ARP가 대표적임
- 한 노드에서 다른 노드로 전송 계층에서 받은 세그먼트 또는 데이터그램을 패킷화 하여 목적지로 전송하는 역할을 담당함

##### 링크 계층(link)

- 데이터링크계층과 물리계층을 합친 계층임
- 링크 계층은 전선, 광섬유, 무선 등으로 데이터가 네트워크를 통해 물리적으로 전송되는 방식을 정의함
- 실질적으로 장치와 장치간의 네트워크가 연결되는 층

---

#### 캡슐화와 비캡슐화

![캡슐화 비캡슐화](<스크린샷 2024-12-25 오후 1.27.29.png>)

##### 캡슐화(encapsulation)

- 네트워크에서 캡슐화란 송신자가 수신자에게 데이터를 보낼 때 데이터가 각 계층을 지나며 각 계층의 특징들이 담긴 헤더들이 붙여지는 과정임
- 예를 들어 전송계층은 TCP 헤더, 네트워크 계층은 IP 주소 헤더를 추가하는 것

##### 비캡슐화(decapsulation)

- 수신자 측에서는 이 과정을 역순으로 수행하는데 이를 비캡슐화라고함
- 즉, 하위 계층에서 상위 계층으로 올라가면서, 각 계층이 담당하는 헤더 정보를 분석한 뒤 제거하고, 최종적으로 원본 데이터(응용 계층 메시지)를 복원해 애플리케이션에게 전달함

---

#### PDU(protocol data unit)

###### TCP/IP 4계층을 기반으로 설명했을 때 각 계층의 데이터 단위

- 애플리케이션 계층: 메시지
- 전송 계층: 세그먼트(TCP), 데이터그램(UDP)
  - 세그먼트 : 적절한 크기로 쪼갠 조각 (세그먼트와 데이터그램의 의미는 같습니다.)
- 인터넷 계층: 패킷
  - 패킷 : 세그먼트에 SP와 DP가 포함된 IP 헤더가 붙은 형태의 조각
- 링크 계층: 프레임(데이터 링크 계층), 비트(물리 계층)
  - 프레임 : MAC주소 헤더와 CRC/체크섬 트레일러가 붙은 조각

##### 프레임

![frame](<스크린샷 2024-12-25 오후 1.38.03.png>)

---

#### CRC/체크섬 트레일러

- 데이터의 오류감지를 위한 수학적 함수가 적용된 값들이 있는 필드
- 링크의 오류(과도한 트래픽 등) 로 인해 데이터 손상을 감지하는 역할을 함
- 이 과정에서 CRC와 체크섬 두가지의 과정을 기반으로 데이터 전송오류 및 데이터무결성을 방지하게 됨(둘 다 비슷함)

###### CRC

- CRC-1, CRC-16 등의 알고리즘으로 나온 값을 통해 데이터 전송 오류 감지를 수행함

###### 체크섬

- MD5, SHA-256 등의 알고리즘으로 나온 값을 통해 데이터 무결성을 방지함
  > ❗️ 참고로 모든 계층에 전달되는 데이터가 쪼개져서 “패킷”으로 전달된다고도 하는 것도 대강 맞는 말이나 PDU에 따라 부르는게 더 맞는 표현임

---

#### OSI 7계층

- TCP / IP 4계층은 OSI 7계층 모델로 설명하기도 함
- 애플리케이션 계층을 세 개로 쪼개고 링크 계층을 데이터 링크 계층, 물리 계층으로 나눠서 표현함
- 또한 인터넷 계층을 네트워크 계층으로 부름

![OSI 7 layer](<스크린샷 2024-12-25 오후 1.45.36.png>)
