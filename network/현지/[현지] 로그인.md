# 로그인

세션기반인증방식 또는 토큰기반인증방식으로 구현된다.

## 세션기반인증방식

세션 기반 인증은 사용자가 로그인하면 서버가 사용자 정보를 세션 저장소(예: 메모리, 데이터베이스)에 저장하고, 세션 ID를 클라이언트에게 발급하는 방식이다. 클라이언트는 이후 요청마다 이 세션 ID를 포함시켜 서버에 전송하고, 서버는 세션 ID를 통해 사용자 정보를 확인한다.

- 세션: 서버와 클라이언트의 연결이 활성화된 상태
- 세션ID: 웹 서버 또는 DB에 저장되는 클라이언트에 대한 유니크한 ID

### 세션기반 로그인 프로세스

1. 로그인: 사용자가 로그인하면 서버는 세션 저장소에 사용자 정보를 저장하고 세션 ID를 생성한다.
2. 세션 ID 발급: 서버는 생성된 세션 ID를 클라이언트에게 전송한다. 일반적으로 쿠키를 통해 전달된다.
3. 요청: 클라이언트는 이후 요청마다 세션 ID를 포함시켜 서버에 전송한다.
4. 검증: 서버는 세션 ID를 통해 세션 저장소에서 사용자 정보를 조회하고 인증을 완료한다.
5. 로그아웃: 사용자가 로그아웃하면 서버는 세션 저장소에서 해당 세션 ID를 삭제한다.

### 세션기반인증방식의 장점

1. 보안: 세션 ID가 탈취되더라도 서버에서 세션을 무효화할 수 있다.
2. 상태 유지: 서버가 사용자 상태를 유지할 수 있어, 사용자별로 맞춤화된 서비스를 제공하기 용이하다.

### 세션기반인증방식의 단점

1. 사용자의 상태에 관한 데이터를 서버에 저장했을 때 로그인 중인 유저의 수가 늘어난다면 서버의 메모리 과부하가 일어날 수 있다.
2. DB중 RDBMS에 저장한다면 직렬화 및 역직렬화에 관한 오버헤드가 발생한다.

## 토큰기반인증방식 (access토큰, refresh토큰) 개념

토큰 기반 인증은 사용자가 로그인하면 서버가 사용자 정보를 담은 토큰을 생성하고, 이를 클라이언트에게 발급하는 방식이다. 클라이언트는 이후 요청마다 이 토큰을 포함시켜 서버에 전송하고, 서버는 토큰을 검증하여 사용자 정보를 확인한다. 대표적으로 JWT(JSON Web Token)가 사용된다.

### 토큰기반 로그인 프로세스

1. 로그인: 사용자가 로그인하면 서버는 사용자 정보를 담은 토큰을 생성한다.
2. 토큰 발급: 서버는 생성된 토큰을 클라이언트에게 전송한다.
3. 요청: 클라이언트는 이후 요청마다 access 토큰을 HTTP Header - Authorization 또는 HTTP Header - Cookie에 토큰을 포함시켜 서버에 전송한다.
4. 검증: 서버는 토큰을 검증하여 사용자 정보를 확인하고 인증을 완료한다.
5. 로그아웃: 토큰 기반 인증은 일반적으로 서버 측에서 토큰을 무효화할 수 없어, 토큰의 만료 시간을 설정하여 관리한다.

### JWT란

JSON Web Token을 의미하며 헤더, 페이로드, 서명으로 이루어져 있고 JSON 객체로 인코딩되며 메시지 인증, 암호화에 사용된다.

### 토큰기반 인증방식의 장점

1. 사용자 인증에 필요한 모든 정보는 토큰 자체에 포함하기 때문에 별도의 인증 저장소가 필요없다.
2. 다른 유형의 토큰보다 가볍다. SAML 이라는 토큰이 있지만 이에 비해 훨씬 경량화되어 있다.
3. 디코딩했을 때 JSON이 나오기 때문에 JSON을 기반으로 쉽게 직렬화, 역직렬화가 가능하다.

### 토큰기반 인증방식의 단점

1. 토큰이 비대해질 경우 서버과부하에 영향을 줄 수 있다.
2. 토큰을 탈취당할 경우 디코딩했을 때 데이터를 볼 수 있다.

- 세션 기반 인증: 보안이 중요하고, 서버 확장이 크게 고려되지 않는 환경에서 적합하다.
  ex) 단일 도메인 애플리케이션 / 즉각적인 세션 제어가 필요한 경우 / 보안이 매우 중요한 금융 서비스
- 토큰 기반 인증: 확장성이 중요하고, 다양한 플랫폼에서 사용해야 하는 환경에서 적합하다.
  ex)마이크로서비스 아키텍처 / 모바일 애플리케이션 / 분산 시스템 / RESTful API 서비스
