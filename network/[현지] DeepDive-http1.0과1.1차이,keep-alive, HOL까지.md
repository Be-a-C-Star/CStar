# DEEP DIVE : HTTP/1.0과 HTTP/1.1의 차이, keep-alive, HOL까지

## HTTP/1.0

- HTTP/1.0은 수명이 짧은 연결
- HTTP 요청은 자체 요청에서 완료
- 각 HTTP 요청당 TCP 핸드셰이크가 발생되며 기본적으로 한 연결당 하나의 요청을 처리하도록 설계됨
- 한 번 연결할 때마다 TCP 연결을 계속해야 하니 RTT가 늘어나는 문제점이 있음.

## HTTP/1.1

- HTTP/1.0의 단점을 보완한 프로토콜
- keep-alive default: 매번 데이터를 요청할 때마다 TCP 연결을 하지 않고 한 번 해놓으면 계속 데이터를 받을 수 있게함. keep-alive header에서 연결유지시간과 최대 요청수를 정할 수 있다.
- 호스트 헤더: 헤더에 특정 호스트를 포함할 수 있게 변경되었으며 항상 호스트를 포함해서 요청하도록 바뀌었다.
- 대역폭 최적화: Range라는 헤더를 추가하여 파일을 다운 받다가 연결이 끊겨도 다시 다운받을 수 잇게 바뀌었다.

## 요청을 줄이기 위한 기술

HTTP/1.1로 발전했음에도 서버요청시마다 RTT는 계속 증가하기 때문에 여러가지 기술들이 있었다.

- 이미지 스프라이트: 수많은 이미지를 하나의 이미지로 만들어 하나의 이미지만 다운받아놓고 이를 통해 수많은 이미지를 다운받는 듯한 효과를 낸다.
- 코드 압축
- 이미지 Base64 인코딩: 이미지 파일을 64진법으로 이루어진 문자열로 인코딩해서 이미지 서버에 대한 HTTP 요청을 할 필요가 없이 만드는 것. 하지만 인코딩 후에 파일크기가 37퍼센트 더 커진다.

## HOL (Head Of Line Blocking)

네트워크에서 같은 큐에 있는 패킷이 그 첫번째 패킷에 의해 지연될 때 발생하는 성능저하 현상을 말한다.
HTTP/1.1은 HOL과 무거운 페더를 가지는 문제를 해결하지 못했다.
