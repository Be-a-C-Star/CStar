# DEEP DIVE : HTTP/2와 HTTP/3의 차이

## HTTP/2

구글은 HTTP/1.1의 한계를 극복하기 위해 SPDY 프로토콜을 개발했고, 이후 이를 기반으로 HTTP/2 프로토콜을 개발했다.

### 바이너리 포맷 계층

애플리케이션 계층과 전송 계층 사이에 바이너리 포맷 계층을 추가한다. 0, 1로 이루어진 바이너리 데이터로 변경되었고 더 작은 메시지가 프레임으로 캡슐화 되어서 전송된다.

### 멀티플렉싱

단일 TCP 연결의 여러 스트림에서 여러 HTTP 요청과 응답을 비동기적으로 보낼 수 있으며 이를 통해 HOL 문제를 해결할 수 있다.

### 서버푸시

서버가 리소스를 클라이언트에 푸시를 할 수 있다. 요청된 html 파일과 함께 다른 개체를 별도로 보낼 수 있다.

### 헤더압축

중복된 헤더는 공통 필드로 헤더를 재구성하며 중복되지 않은 헤더값은 허프만 인코딩 압충 방법으로 압축시켜 가벼운 헤더를 만든다.

### 우선순위

서버에서 원하는 순서대로 우선순위를 정해 리소스를 전달할 수 있다.

## HTTP/3

HTTP/2는 여전히 TCP를 사용하기 때문에 초기 연결에 대한 RTT로 인한 지연시간 문제가 있었고 이를 해결한 버전이 HTTP/3이다.
HTTP/3는

- QUIC(Quick UDP Internet Connections)라는 계층 위에서 돌아간다.
- TCP가 아닌 UDP 기반으로 돌아간다.
- 멀티플렉싱을 가지고 있다.
- 초기 연결 설정시 지연 시간 감소가 된다.
- TLS로 암호화통신을 구축할 때의 단 한번의 핸드셰이크를 활용해 클라이언트와 서버간의 연결, 암호화 통신 모두 다 구축을 한다. 이를 통해 1 - RTT 만에 모든 연결을 성립할 수 있다.
- 전송된 패킷이 손실 되었다면 수신측에서 에러를 검출하고 수정하는 방식
- 열악한 네트워크 환경에서도 낮은 패킷손실률을 자랑하는 순방향 오류 수정 메커니즘의 특징을 가진다.
