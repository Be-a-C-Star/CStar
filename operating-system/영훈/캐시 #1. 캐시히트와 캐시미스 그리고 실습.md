## 캐시

###### 데이터를 미리 복사해 놓는 임시 저장소이자 빠른 장치와 느린 장치에서 속도 차이에 따른 병목 현상을 줄이기 위한 메모리

- 이를 통해 데이터 접근 시간의 단축, 데이터를 다시 계산하는 등의 시간을 절약할 수 있다.
- 캐시의 예는 CPU 레지스터가 대표적인데 CPU가 메모리로부터 데이터를 가져올 때의 시간이 너무나 크기 때문에 그 중간에 레지스터 계층을 둬서 속도 차이를 해결한다.

![alt text](<스크린샷 2025-05-15 오후 12.26.08.png>)

- 여기서 캐시히트란 캐시에서 원하는 데이터를 찾은 것을 말한다.
- 캐시미스는 캐시에서 원하는 데이터를 찾지 못한 것을 말한다.
- 위 예시는 캐시미스가 일어나면 메모리로 가서 원하는 데이터를 레지스터에 등록한다.

참고로 이러한 캐시는 우리가 사용하는 서비스 내부에서도 많이 찾아볼 수 있다.

### Ex.

![alt text](<스크린샷 2025-05-15 오후 12.28.03.png>)

- 데이터베이스에서의 redis 데이터베이스를 캐시 계층으로 둔 사례

![alt text](<스크린샷 2025-05-15 오후 12.28.30.png>)

- 웹 서버 앞단에 nginx 서버를 캐시 계층으로 둔 사례

### 캐시 - 지역성의 원리

캐시를 설정할 때는 자주 사용하는 데이터를 기반으로 설정해야 한다. 이 때 지역성을 기반으로 설정되는데 지역성은 시간 지역성(Temporal Locality)과 공간 지역성(Spatial Locality)으로 나뉘게 된다.

#### 시간지역성

- 시간 지역성은 최근 사용한 데이터에 다시 접근하려는 특성을 말한다.

#### 공간지역성

공간 지역성은 최근 접근한 데이터를 이루고 있는 공간이나 그 가까운 공간에 접근하는 특성을 말한다.

```javascript
let arr = Array.from({ length: 10 }, () => 0);
console.log(arr);
for (let i = 0; i < 10; i += 1) {
  arr[i] = i;
}
console.log(arr);
/*
[
 0, 0, 0, 0, 0,
 0, 0, 0, 0, 0
]
[
 0, 1, 2, 3, 4,
 5, 6, 7, 8, 9
]
*/
```

- 위 코드를 보면 최근 사용한 변수 i에 대해 계속해서 += 1을 하는 것을 볼 수 있다.(시간지역성)
- 또한 최근 사용했던 공간인 arr라는 배열에 i가 할당되며 연속적으로 접근하는 것을 볼 수 있다.(공간지역성)
