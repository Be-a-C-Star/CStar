프로그램에 필요한 메모리를 할당할 때 시작 메모리 위치, 메모리 할당 크기를 기반으로 할당하는데 이는 연속 할당과 불연속 할당으로 나뉜다.

## 연속 할당(contiguous memory allocation)

###### 메모리에 연속적으로 공간을 할당하는 것

- 사용 가능한 모든 메모리 공간이 같은 위치에 함께 있다. 즉, 메모리 파티션이 전체 메모리 공간에서 여기저기서 분산되어있지 않다.
- 고정 분할 방식과 가변 분할 방식이 있다.
  ![alt text](<스크린샷 2025-05-15 오후 4.20.11.png>)
- 위 그림처럼 프로세스에 필요한 메모리들이 연속해서 할당된 것을 볼 수 있다.

### 고정 분할 방식(fixed partition allocation)

###### 메모리를 미리 같은 크기로 분할해서 할당하는 방법

- 내부 단편화(internal fragmentation)가 발생한다.

#### 내부 단편화

###### 프로그램이 필요한 공간보다 더 많은 메모리가 할당되어 내부적으로 조각이 많이 생기는 것

![alt text](<스크린샷 2025-05-15 오후 4.21.54.png>)

- 이를 통해 추후에 프로그램에 필요한 메모리를 할당하지 못하는 현상이 일어나게 된다.

### 가변 분할 방식(variable partition allocation)

###### 프로그램에 필요한만큼 동적으로 할당하는 방법

- 메모리를 고정된 크기 블록으로 나누지 않고, 프로그램이 필요한 만큼의 메모리를 동적으로 할당한다.
- 프로그램이 할당된 후 남은 공간은 새로운 가변 분할로 남겨지며, 이는 이후 다른 프로그램에 할당될 수 있다.
- 이를 통해 내부 단편화를 줄일 수 있지만 외부 단편화가 발생할 수 있다.
  ![alt text](<스크린샷 2025-05-15 오후 4.23.34.png>)

#### 외부 단편화

외부 단편화는 아래 그림과 같이 동적으로 할당하다보면 동적으로 할당한 외부에 작은 조각들이 생기게 되는 현상을 말한다.
![alt text](<스크린샷 2025-05-15 오후 4.23.58.png>)

- 조각들을 합하면 (40kb + 10kb)로 50kb짜리 프로그램을 충족시킬 수 있지만 외부의 조각들이 되어있기 때문에 50kb와 같은 큰 프로그램이 들어왔을 때 메모리를 할당하지 못하는 현상이 발생할 수 있는 것이다.

#### 가변 분할 방식의 종류

최초적합, 최적적합, 최악적합이 있다.

- 최초 적합(first fit)

  - 위쪽이나 아래쪽부터 시작해 홀을 찾으면 바로 할당한다.

- 최적 적합(best fit)
  - 필요한 메모리 크기 이상인 공간 중 가장 작은 홀부터 할당한다.
- 최악 적합(worst fit)
  - 프로세스의 크기와 가장 많이 차이가 나는 홀에 할당한다.
  - 내부 단편화를 발생시킬 수도 있지만 줄어들게 할 수 있다.
  - 항상 블록의 나머지가 향후 요청을 처리하는 데 유용할 것으로 기대하면서 목록에서 가장 큰 블록을 할당한다.
    - Ex. 최악 적합은 크기가 40인 블록이고 나머지는 크기가 15라고 했을 때 40에 들어가게 된다.
    - 이 때, 메모리 요청이 일반적으로 같은 크기(10)가 연속적으로 들어온다고 하면 최악 적합이 제일 효과적이다.(최적 적합은 15에 들어가게 되므로)
    - 이 때 40짜리에 10이 들어가고 다시 10, 10, 10 이렇게 들어가면서 오히려 단편화가 생기지 않게 된다.
      ![alt text](<스크린샷 2025-05-15 오후 4.30.21.png>)
- 홀(hole): 할당할 수 있는 비어 있는 메모리 공간
