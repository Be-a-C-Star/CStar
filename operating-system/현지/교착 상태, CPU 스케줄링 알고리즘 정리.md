# 교착 상태(deadlock)

- 교착상태는 두 개 이상의 프로세스들이 서로가 가진 자원을 기다리며 중단된 상태
- 각 프로세스는 서로가 원하는 자원을 유지한채 다른 프로세스의 자원을 얻기를 기다림

## 교착 상태의 원인

- 상호배제: 다른 프로세스들은 접근이 불가능
- 점유 대기: 특정 프로세스가 점유한 자원을 다른 프로세스가 요청하며 대기하는 상태
- 비선점: 다른 프로세스의 자원을 강제적으로 가져올 수 없음
- 환형 대기: 서로가 서로의 자원을 요구하는 상황

## 교착 상태의 해결 방법

- 자원을 할당할 때 애초에 조건이 성립되지 않도록 설계
- 교착 상태가 발생하면 사이클이 있는지 찾아보고 이에 관련된 프로세스를 한 개씩 지움
- 교착 상태는 매우 드물게 일어나기 때문에 이를 처리하는 비용이 더 커서 교착 상태가 발생하면 사용자가 작업을 종료
- 은행원 알고리즘 사용

### 은행원 알고리즘?

교착 상태 가능성이 없을 때만 자원 할당되며, 프로세스당 요청할 자원들의 최대치를 통해 자원 할당가능 여부를 파악
단점으로는 스템에 들어갈 때 필요한 최대 자원 수 예측 어려움.

# CPU 스케줄링 알고리즘 #1. 비선점형(FCFS, SJF, 우선순위)

CPU가 어떤 프로세스를 선택할 것인지는 스케줄링 알고리즘을 통해 선택되며 효율적으로 선택하는게 중요

## 효율적이란?

1. CPU사용률이 높은가?
2. 단위 시간당 작업을 마친 프로세스의 수(처리량)가 높은가?
3. 작업을 요청한 프로세스가 작업을 시작하기 전 대기하는 시간은 짧은가?

### 비선점형방식(FCFS, SJF, 우선순위)

프로세스가 스스로 CPU 소유권을 포기하는 방식이며, 강제로 프로세스를 중지하지 않음.

- FCFS(First Come, First Served): 가장 먼저 온 것을 가장 먼저 처리하는 알고리즘
- SJF(Shortest Job First): 실행 시간이 가장 짧은 프로세스를 가장 먼저 실행하는 알고리즘
- 우선순위: 오래된 작업일수록 ‘우선순위를 높이는 방법(aging)’을 통해 단점을 보완한 알고리즘

# CPU 스케줄링 알고리즘 #2. 선점형(라운드로빈, SRF, 다단계큐)

## 선점형(라운드로빈, SRF, 다단계큐)

지금 사용하고 있는 프로세스를 알고리즘에 의해 중단시켜 버리고 강제로 다른 프로세스에 CPU 소유권을 할당할 수도 있는 방식

- 라운드 로빈(RR, Round Robin): 각 프로세스는 동일한 할당 시간을 주고 그 시간 안에 끝나지 않으면 다시 준비 큐(ready queue)의 뒤로 가는 알고리즘
- SRF(SRTF라고도 함, Shortest Remaining Time First): 중간에 더 짧은 작업이 들어오면 수행하던 프로세스를 중지하고 해당 프로세스를 수행하는 알고리즘
- 다단계 큐: 우선순위에 따른 준비 큐를 여러 개 사용하고, 큐마다 라운드 로빈이나 FCFS 등 다른 스케줄링 알고리즘을 적용한 것
