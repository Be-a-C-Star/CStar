## 메모리 계층

메모리 계층은 레지스터, 캐시, 주기억장치, 보조기억장치로 구성되어 있다.

- 레지스터: CPU 내의 작은 메모리, 휘발성, 속도 가장 빠름, 기억 용량이 가장 적음.
- 캐시: CPU내의 L1, L2 캐시를 지칭함. 휘발성, 속도 빠름. 기억 용량이 적음.
- 주기억장치: RAM을 가리킨다. 휘발성, 속도 보통. 기억 용량 보통.
- 보조기억장치: HDD, SSD를 일컬으며 비휘발성, 속도 낮음, 기억 용량이 많음.

### 계층이 존재하는 이유

- 더 빠른 접근과 처리 속도 증가
- 비용의 효율성
- 자원의 효율적 사용

## 가상메모리와 스와핑, 페이지폴트 그리고 스레싱

### 가상메모리

컴퓨터가 실제로 이용할 수 있는 메모리 자원(물리 주소)을 추상화하여 사용자에게 더 큰 메모리처럼 보이게 만드는 기법

### 페이지 테이블

페이지 테이블은 가상 메모리 주소를 물리 메모리 주소로 변환하는데 사용하는 데이터 구조이다.
즉, 가상 메모리에서 프로그램이 사용하는 주소를 실제 물리 메모리에서 해당하는 주소로 매핑해주는 역할을 한다.

#### 가상 주소

가상 주소는 프로그램이 실행될 때 프로세스가 사용하는 메모리 주소이다.

#### 물리 주소

물리 주소는 실제 물리적 메모리(RAM)에서의 주소이다.

### 페이지 폴트와 스와핑

페이지 폴트는 프로그램이 필요로 하는 페이지가 물리 메모리에 없을 때 발생하며, 이를 디스크에서 로드하는 과정에서 스와핑이 일어날 수 있다. 특히 페이지 교체가 필요할 때, 메모리에서 페이지를 디스크로 '스와핑 아웃'하고, 필요한 페이지를 디스크에서 메모리로 '스와핑 인'하는 방식으로 동작한다.

#### 페이지 폴트

프로그램이 사용하려는 데이터가 메모리에 로드되어 있지 않아서 발생하는 상황

#### 스와핑(Swapping)

스와핑은 가상 메모리 관리 기법 중 하나로, 프로세스나 프로세스의 일부 페이지를 물리 메모리(RAM)에서 디스크(보통 하드디스크나 SSD)로 이동시키거나, 디스크에서 다시 물리 메모리로 가져오는 작업을 말한다. 이를 통해 시스템은 물리 메모리의 용량을 초과하는 데이터나 프로세스를 효율적으로 관리할 수 있다.

### 스레싱(Thrashing)

스레싱은 가상 메모리 시스템에서 발생하는 성능 저하 현상으로, 시스템이 과도하게 페이지 교체를 수행하면서 실제 작업을 제대로 처리하지 못하는 상태를 의미한다. 이 문제는 가상 메모리 시스템이 잘못 관리될 때 발생할 수 있다.

### 가상 메모리의 필요성

- 물리 메모리 초과하는 메모리 사용: 물리 메모리(RAM)는 한정된 자원인데, 프로그램이 필요로 하는 메모리는 더 클 수 있다. 가상 메모리는 디스크 공간을 확장된 메모리처럼 사용할 수 있게 해, 물리 메모리가 부족하더라도 더 많은 프로그램을 동시에 실행할 수 있게 도와준다.
- 프로세스 격리: 가상 메모리는 각 프로세스가 자기만의 메모리 공간을 갖게 하여, 서로 간섭하지 않게 하고, 보안성과 안정성을 높인다. 이를 통해 프로세스 간의 충돌이나 메모리 접근 오류를 방지할 수 있다.
- 메모리 관리의 효율성: 물리 메모리가 부족한 상황에서도, 가상 메모리를 사용하면 데이터를 디스크에 저장하고, 필요한 데이터만 물리 메모리에 불러오는 방식으로 효율적으로 메모리를 관리할 수 있다.
- 가상 주소 공간 제공: 각 프로세스는 독립적인 가상 주소 공간을 가지고 있어, 메모리 보호와 프로세스 독립성을 보장한다.
