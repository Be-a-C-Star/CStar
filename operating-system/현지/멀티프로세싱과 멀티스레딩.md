# 멀티프로세싱과 멀티스레딩
## 멀티프로세싱
- 동시에 두 가지 이상의 일을 수행할 수 있는 것을 말함. 
- 특정 프로세스 중 일부에 문제가 발생되더라도 다른 프로세스에 영향을 미치지 않으며 격리성과 신뢰성이 높음.

## 멀티스레딩
- 프로세스 내 작업을 멀티스레드로 처리하는 기법
- 스레드끼리 서로 자원을 공유함. 
- 프로세스보다 가벼워서 효율성이 높음.
- 한 스레드의 문제가 다른 스레드에도 영향을 미침.

# IPC (Inter-Process Community)
- 프로세스끼리 데이터를 주고받고 공유데이터를 관리하는 메커니즘
- 공유메모리, 파일, 소켓, 파이프, 메세지 큐 등이 있음.

## 공유메모리
- 여러 프로세스가 서로 통신할 수 있도록 메모리를 공유하는 것
- 메모리 자체를 공유하기 때문에 불필요한 데이터 복사의 오버헤드가 발생하지 않음.
- 같은 메모리 영역을 여러 프로세스가 공유하기 때문에 동기화가 필요함.
- IPC 중 가장 빠른 통신 방법

## 파일
디스크에 저장된 데이터를 기반으로 통신하는 것

## 소켓
네트워크 인터페이스를 기반으로 통신하는 것

## 파이프

### 익명 파이프
- 프로세스 사이에 FIFO 기반의 통신채널을 만들어 통신하는 것
- 파이프 하나당 단방향 통신이기 때문에 양방향 통신을 하려면 2개의 익명 파이프를 만들어야 함.
- 부모, 자식 프로세스 간에만 사용 가능.
- 파이프 용량은 제한적이고 쓰기 프로세스가 읽기 프로세스보다 더 빠를 수 없음.

### 명명 파이프
- 익명 파이프의 확장된 개념
- 다른 네트워크 상에서도 통신할 수 있음.
- 보통 서버, 클라이언트용 파이프를 구분해서 동작함.

### 메시지 큐
- 메시지를 큐 자료구조 형태로 관리하는 버퍼를 만들어 통신하는 것
    1. 프로세스가 메시지를 보내거나 받기 전에 큐를 초기화
    2. 보내는 프로세스의 메시지는 큐에 복사되어 받는 프로세스에 전달됨.

# 공유자원과 경쟁상태 그리고 임계영역
## 공유 자원
시스템 안에서 각 프로세스, 스레드가 함께 접근할 수 있는 모니터, 프린터 등의 자원이나 변수를 의미

## 경쟁 상태
- 공유 자원을 둘 이상의 프로세스 또는 스레드가 동시에 읽거나 쓰는 상황을 말함. 
- 동시에 접근시 타이밍이 예상되는 결과 값에 영향을 줄 수 있는 상태를 의미.

## 임계 영역
- 임계영역은 둘 이상의 프로세스 또는 스레드가 공유자원에 접근할 때 순서 등의 이유로 결과가 달라지는 코드 영역
- 한 번에 둘 이상의 프로세스나 스레드에 들어갈 수 없게 설계됨.

## 경쟁 상태의 중요성
경쟁 상태를 잘 해결하지 못할 경우 데이터 정합성, 무결성 지키지 못함.

### 데이터 정합성
예상되는 데이터의 값과 다른 것.

### 데이터 무결성
데이터의 어떠한 규칙을 위반하면 안되는 것.

# 뮤텍스, 세마포어, 모니터
- 경쟁 상태를 해결하는 대표적인 방법들. 
- 상호배제, 한정대기, 진행의 융통성의 조건을 만족시키며 경쟁상태 해결

## 상호배제, 한정대기, 진행의 융통성
- 상호 배제: 한 프로세스가 임계 영역에 들어갔을 때 다른 프로세스는 들어갈 수 없음.
- 한정 대기: 특정 프로세스가 임계영역 진입을 요청한 후 승인 전까지 다른 프로세스가 임계영역에 진입하는 횟수를 제한하는 것
- 진행의 융통성: 임계 영역을 사용하지 않는다면 임계영역 외부의 어떠한 프로세스도 들어갈 수 있으며 이 때 프로세스끼리 서로 방해하지 않는 것. 

## 뮤텍스
공유자원은 lock()으로 잠금 설정하고, 사용 후에는 unlock()을 통해 잠금해제가 되는 객체 lock을 기반으로 경쟁상태 해결. 잠금시 프로세스나 스레드가 잠긴 코드 영역에 접근 불가. 잠금 메커니즘 사용.

## 세마포어
- 일반화된 뮤텍스
- wait(), signal()로 공유 자원에 대한 접근 처리
- 여러 프로세스가 동시에 임계영역에 접근할 수 있게함.
- 신호 메커니즘 사용용

### 바이너리 세마포어
0과 1의 두 가지 값만 가질 수 있는 세마포어

### 카운팅 세마포어
여러 개의 값을 가질 수 있는 세마포어

## 모니터
둘 이상의 스레드나 프로세스가 공유 자원에 안전하게 접근할 수 있도록 공유자원을 숨기고 해당 접근에 대해 인터페이스만 제공하는 객체

## 모니터와 세마포어 차이
- 모니터: 구현 쉽고 한 번에 하나의 프로세스만 공유자원에 접근 가능. 인터페이스 기반
- 세마포어: 구현 어렵고 한 번에 여러 개의 프로세스가 공유자원에 접근 가능. 정수변수 기반
