# 운영체제와 컴퓨터 시스템의 구조

운영체제(OS, Operating System)는 컴퓨터 하드웨어를 관리하고, 사용자와 소프트웨어가 상호 작용할 수 있도록 해주는 시스템 소프트웨어다.
운영체제가 없으면 프로그램이 직접 하드웨어를 제어해야 하므로 매우 복잡해지고, 보안이나 안정성도 떨어지게 된다.

## 운영체제의 종류

### GUI (Graphical User Interface)

그래픽을 사용하여 컴퓨터와 상호작용하는 인터페이스
ex) windowOS, macOS

### CUI (Character User Interface)

명령어를 입력해서 조작하는 운영체제이다. GUI(그래픽) 없이 터미널에서 사용한다.
ex) MS-DOS, Linux (터미널 환경)

### 운영체제의 역할

- 프로세스 관리 (Process Management): CPU를 여러 프로그램이 효율적으로 사용할 수 있도록 프로세스를 관리하며 멀티태스킹(여러 프로그램 실행), 프로세스 생성/종료, 스케줄링(순서 정하기) 같은 작업을 수행한다.

- 메모리 관리 (Memory Management): 실행 중인 프로그램이 메모리를 효율적으로 사용할 수 있도록 관리한다. 프로세스마다 메모리를 적절히 할당하고, 사용이 끝나면 해제한다.

- 파일 시스템 관리 (File System Management): 파일을 저장, 읽기, 쓰기, 삭제할 수 있도록 도와준다. 디렉터리(폴더) 구조를 관리하고, 보안(파일 권한)도 담당한다.

- 입출력 장치 관리 (I/O Management): 키보드, 마우스, 프린터, 디스크 등 하드웨어 장치와의 통신을 관리한다. 장치 드라이버를 통해 하드웨어와 소프트웨어가 원활하게 상호작용할 수 있도록 해준다.

- 사용자 인터페이스 제공: CLI(Command Line Interface) 또는 GUI(Graphical User Interface)를 제공해서 사용자가 컴퓨터를 쉽게 사용할 수 있도록 도와준다.

### 운영체제의 구조

운영체제는 여러 계층으로 이루어져 있다. 일반적으로 **커널(Kernel)**이 중심이 되고, 그 위에 시스템 소프트웨어와 응용 프로그램이 올라가는 구조이다.

```
+---------------------------------+
| 응용 프로그램 (Application) | ← 우리가 실행하는 프로그램 (브라우저, 게임, 메모장 등)
+---------------------------------+
| 시스템 호출 (System Call) | ← 프로그램이 운영체제 기능을 요청하는 인터페이스
+---------------------------------+
| 운영체제 (OS) |
| ├── 사용자 인터페이스 (Shell) | ← CLI(터미널), GUI(바탕화면)
| ├── 파일 시스템 (File System) | ← 파일 관리
| ├── 프로세스 관리 (Scheduler) | ← 실행 중인 프로그램 관리
| ├── 메모리 관리 (Memory) | ← RAM 사용 관리
| ├── 장치 드라이버 (Drivers) | ← 하드웨어 장치 제어
| └── 네트워크 관리 (Network) | ← 인터넷 연결 관리
+---------------------------------+
| 커널 (Kernel) | ← 운영체제의 핵심, 하드웨어와 직접 통신
+---------------------------------+
| 하드웨어 (Hardware) | ← CPU, RAM, 디스크, 키보드 등
+---------------------------------+
```

#### 운영체제의 핵심 요소

1. 커널 (Kernel)

- 운영체제의 핵심 부분으로, 하드웨어와 직접 통신하면서 시스템 자원을 관리
- 프로세스 관리, 메모리 관리, 장치 제어 등을 담당
- 종류: 모놀리식 커널(리눅스, 유닉스), 마이크로커널(Windows NT)

2. 시스템 콜 (System Call)

- 응용 프로그램이 운영체제의 기능을 사용할 때 호출하는 API 같은 개념
- 예: open(), read(), write(), fork()

3. 쉘 (Shell)

- 사용자와 운영체제 커널을 연결하는 인터페이스
- CLI(터미널 명령어)와 GUI(그래픽 인터페이스) 방식이 있음
- 예: Bash (리눅스), PowerShell (윈도우)

#### 운영체제의 작동 과정

1. 컴퓨터 전원 ON → 부트로더 실행: BIOS/UEFI가 운영체제를 메모리에 로드함.
2. 커널 로드 → 기본 시스템 초기화: 메모리, 프로세스, 파일 시스템, 장치 드라이버 등을 초기화.
3. 사용자 인터페이스 실행: CLI(터미널) 또는 GUI(바탕화면)가 실행됨.
4. 사용자가 프로그램 실행 → 시스템 콜 요청: 프로그램이 시스템 자원을 요청하면 커널이 처리.
5. 프로그램 실행 & 종료 → 리소스 반환: 메모리, CPU 사용이 끝나면 운영체제가 정리.

### 컴퓨터 시스템의 구조

- CPU : 인터럽트에 의해 메모리에 존재하는 명령어를 해석해서 실행하는 일꾼
- DMA컨트롤러 : CPU의 일을 보조하는 일꾼
- 메모리 : 전자회로에서 데이터, 상태 등을 기록하는 장치(작업장)
- 타이머:특정프로그램에시간을다는역할
- 디바이스 컨트롤러 : IO디바이스들의 작은 CPU
- 로컬버퍼 : 디바이스에 달려 있는 작은 메모리

### CPU (Central Processing Unit)

컴퓨터의 연산과 제어를 담당하는 중앙 처리 장치. 산술논리연산장치, 제어장치, 레지스터로 구성되어있다. 인터럽트에 의해 메모리에 존재하는 명령어를 해석해서 실행하는 일꾼.

- 산술논리연산장치 (arithmetic and logical unit, ALU): 덧셈, 뺄셈, 논리 연산 등을 수행하는 부분.
- 제어장치 (control unit, CU): 명령을 해석하고 실행 순서를 결정하는 역할. 프로그램이 어떤 작업을 수행할지 결정한다.
- 레지스터: CPU 내부의 초고속 임시 저장 공간.

## 인터럽트

인터럽트는 CPU가 작업을 하다가 긴급한 요청이 들어오면 현재 작업을 잠시 멈추고, 급한 일을 먼저 처리한 후 다시 원래 작업으로 돌아가는 메커니즘이다. CPU는 계속해서 프로그램을 실행하는데, **예상치 못한 이벤트(입력, 오류, 장치 요청 등)**가 발생할 수 있다. 이럴 때 CPU가 무작정 기다리지 않고, 필요한 순간에만 특정 작업을 처리하도록 하는 게 인터럽트이다.
오류뿐만 아니라 키보드, 마우스 등 IO 디바이스를 사용할 때의 인터럽트, 우선순위가 높은 프로세스의 발생 등으로 발생한다.

- CPU가 메모리에 있는 명령어를 순차적으로 실행한다.
- 인터럽트가 발생되면 점프해서 인터럽트 핸들러 함수가 모여 있는 인터럽트 벡터로 가서 인터럽트핸들러 함수(인터럽트 서비스 루틴, ISR이라고도 함) 가 실행되며 특정 명령어를 실행하게 된다.
- 이 후 인터럽트가 종료되면 다시 순차적으로 실행되게 한다.

### 인터럽트의 종류

- 하드웨어 인터럽트: IO 디바이스 등 하드웨어에서 발생하는 인터럽트. 예를 들어 마우스를 기반으로 버튼을 클릭할 때, 디스크에서 파일읽기, 쓰기 작업이 완료되었을 때 발동한다.
- 소프트웨어 인터럽트: 트랩(trap)이라고도 한다. 프로세스 오류, 프로세스의 종료, 시작 등을 기반으로 프로세스에서 발생하는 인터럽트이며, 하드웨어 인터럽트보다 우선순위가 높다.
